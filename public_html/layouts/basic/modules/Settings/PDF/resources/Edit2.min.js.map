{"version":3,"file":"Edit2.min.js","sources":["Edit2.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_PDF_Edit_Js(\"Settings_PDF_Edit2_Js\", {}, {\n\tstep2Container: false,\n\tadvanceFilterInstance: false,\n\tinit: function () {\n\t\tthis.initialize();\n\t},\n\t/**\n\t * Function to get the container which holds all the reports step1 elements\n\t * @return {jQuery} object\n\t */\n\tgetContainer: function () {\n\t\treturn this.step2Container;\n\t},\n\t/**\n\t * Function to set the reports step1 container\n\t * @params : element - which represents the reports step1 container\n\t * @return : current instance\n\t */\n\tsetContainer: function (element) {\n\t\tthis.step2Container = element;\n\t\treturn this;\n\t},\n\t/**\n\t * Function  to intialize the reports step1\n\t */\n\tinitialize(container) {\n\t\tif (typeof container === 'undefined') {\n\t\t\tcontainer = $('#pdf_step2');\n\t\t}\n\t\tif (container.is('#pdf_step2')) {\n\t\t\tthis.setContainer(container);\n\t\t} else {\n\t\t\tthis.setContainer($('#pdf_step2'));\n\t\t}\n\t},\n\tsubmit() {\n\t\tvar aDeferred = $.Deferred();\n\t\tvar form = this.getContainer();\n\t\tvar formData = form.serializeFormData();\n\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tvar saveData = form.serializeFormData();\n\t\tsaveData['action'] = 'Save';\n\t\tsaveData['step'] = 2;\n\t\tAppConnector.request(saveData).done(function (data) {\n\t\t\tdata = JSON.parse(data);\n\t\t\tif (data.success === true) {\n\t\t\t\tAppConnector.request(formData).done(function (data) {\n\t\t\t\t\tform.hide();\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: app.vtranslate('JS_PDF_SAVED_SUCCESSFULLY')});\n\t\t\t\t}).fail(function (error, err) {\n\t\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}).fail(function (error, err) {\n\t\t\tapp.errorLog(error, err);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterCancelStepClickEvent: function (form) {\n\t\t$('button.cancelLink', form).on('click', function () {\n\t\t\twindow.history.back();\n\t\t});\n\t},\n\tregisterEditors(container) {\n\t\t$(container).find('.js-editor').each(function () {\n\t\t\tconst editor = $(this);\n\t\t\tnew App.Fields.Text.Editor(editor, {\n\t\t\t\ttoolbar: 'PDF',\n\t\t\t\tfont_names: 'dejavusans',\n\t\t\t\theight: editor.attr('id') === 'body_content' ? '800px' : '80px',\n\t\t\t\tstylesSet: [{\n\t\t\t\t\tname: 'Komorka 14',\n\t\t\t\t\telement: 'td',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tstyle: 'font-size:14px'\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t\ttoolbar_PDF: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'clipboard',\n\t\t\t\t\t\titems: ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo']\n\t\t\t\t\t},\n\t\t\t\t\t{name: 'editing', items: ['Find', 'Replace', '-', 'SelectAll', '-', 'Scayt']},\n\t\t\t\t\t{name: 'links', items: ['Link', 'Unlink']},\n\t\t\t\t\t{name: 'insert', items: ['Image', 'Table', 'HorizontalRule']},\n\t\t\t\t\t{name: 'tools', items: ['Maximize', 'ShowBlocks']},\n\t\t\t\t\t{name: 'document', items: ['Source']},\n\t\t\t\t\t'/',\n\t\t\t\t\t{name: 'styles', items: ['Styles', 'Format', 'Font', 'FontSize']},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'basicstyles',\n\t\t\t\t\t\titems: ['Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript']\n\t\t\t\t\t},\n\t\t\t\t\t{name: 'colors', items: ['TextColor', 'BGColor']},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'paragraph',\n\t\t\t\t\t\titems: ['NumberedList', 'BulletedList', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock']\n\t\t\t\t\t},\n\t\t\t\t\t{name: 'basicstyles', items: ['CopyFormatting', 'RemoveFormat']},\n\t\t\t\t],\n\t\t\t\tallowedContent: {\n\t\t\t\t\t'$1': {\n\t\t\t\t\t\telements: CKEDITOR.dtd,\n\t\t\t\t\t\tattributes: true,\n\t\t\t\t\t\tclasses: true,\n\t\t\t\t\t\tstyles: {\n\t\t\t\t\t\t\t'color': true,\n\t\t\t\t\t\t\t'background-color': true,\n\t\t\t\t\t\t\t'font-size': true,\n\t\t\t\t\t\t\t'font-weight': true,\n\t\t\t\t\t\t\t'font-family': true,\n\t\t\t\t\t\t\t'text-align': true,\n\t\t\t\t\t\t\t'text-transform': true,\n\t\t\t\t\t\t\t'width': true,\n\t\t\t\t\t\t\t'height': true,\n\t\t\t\t\t\t\t'border': true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterEvents: function () {\n\t\tconst container = this.getContainer();\n\t\tvar opts = app.validationEngineOptions;\n\t\t// to prevent the page reload after the validation has completed\n\t\topts['onValidationComplete'] = function (form, valid) {\n\t\t\t//returns the valid status\n\t\t\treturn valid;\n\t\t};\n\t\topts['promptPosition'] = \"topLeft\";\n\t\tcontainer.validationEngine(opts);\n\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('.select2'));\n\t\tthis.registerCancelStepClickEvent(container);\n\t\tthis.registerEditors(container);\n\t\tApp.Fields.Text.registerCopyClipboard(container);\n\t}\n});\n"],"names":["Settings_PDF_Edit_Js","step2Container","advanceFilterInstance","init","initialize","getContainer","setContainer","element","container","$","is","submit","Deferred","form","formData","serializeFormData","progressIndicatorElement","progressIndicator","saveData","AppConnector","request","done","data","JSON","parse","success","hide","aDeferred","resolve","Settings_Vtiger_Index_Js","showMessage","text","app","vtranslate","fail","error","err","errorLog","promise","registerCancelStepClickEvent","on","window","history","back","registerEditors","find","each","Fields","Text","Editor","editor","toolbar","font_names","height","attr","stylesSet","name","attributes","style","toolbar_PDF","items","allowedContent","elements","CKEDITOR","dtd","classes","styles","registerEvents","opts","validationEngineOptions","valid","validationEngine","App","Picklist","showSelect2ElementView","registerCopyClipboard"],"mappings":"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"}